all: Parser.js Nodes.js

Parser.js: sql.jison
	../../node_modules/jison/lib/cli.js < ./sql.jison > ./Parser.js

Nodes.js: nodes
	echo "'use strict';" > Nodes.js
	echo '' >> Nodes.js
	echo '// generated by `make`' >> Nodes.js
	ls nodes/*.js | sed 's/.*\///' | sed -E 's/\.js$$//' | sort | awk '{print "exports['\''"$$1"'\''] = require('\''./nodes/"$$1".js'\'');";}' >> Nodes.js

clean:
	rm -f Parser.js
	rm -f Nodes.js
